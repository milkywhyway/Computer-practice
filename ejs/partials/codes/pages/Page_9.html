<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task 9</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
</head>

<body id="body">
    <a href="/Task9" class="btn btn-primary m-3">Return</a> <br><br>
</body>

<script>
    let table = document.createElement('table')
    table.classList.add('table')
    table.classList.add('table-bordered')
    let thead = document.createElement('thead')
    let tbody = document.createElement('tbody')

    table.appendChild(thead)
    table.appendChild(tbody)

    let row_1 = document.createElement('tr')
    let heading_1 = document.createElement('th')
    heading_1.innerHTML = "Рок"
    let heading_2 = document.createElement('th')
    heading_2.innerHTML = "Прибуток"
    let heading_3 = document.createElement('th')
    heading_3.innerHTML = "Статус"

    row_1.appendChild(heading_1)
    row_1.appendChild(heading_2)
    row_1.appendChild(heading_3)
    thead.appendChild(row_1)

    let negative_arr = []
    let positive_obj = {}

    for (let k = 1991; k <= 2001; k++) {
        let status
        y = 100 * (2 * Math.sin(k) * Math.sin(2 * k - 1.5) * Math.cos(2 * k + 1.5) - 6)
        if (y >= 0) {
            positive_obj[k] = y
            status = 'Прибутки'
        } else {
            negative_arr.push(y)
            status = 'Збитки'
        }

        let row = document.createElement('tr');
        let row_data_1 = document.createElement('td');
        row_data_1.innerHTML = k.toFixed(0);
        let row_data_2 = document.createElement('td');
        row_data_2.innerHTML = y.toFixed(2);
        let row_data_3 = document.createElement('td');
        row_data_3.innerHTML = status;

        row.appendChild(row_data_1)
        row.appendChild(row_data_2)
        row.appendChild(row_data_3)
        tbody.appendChild(row)
    }

    document.getElementById('body').appendChild(table)


    if (negative_arr.length !== 0) {
        const sum = (negative_arr.reduce((partialSum, a) => partialSum + a, 0)).toFixed(2)
        document.write(`Сума збитків компанії = ${sum}<br>`)
    } else {
        document.write('Компанія не мала збитків<br>')
    }

    let years = Object.keys(positive_obj)
    let values = Object.values(positive_obj)
    if (years.length != 0) {
        let index = values.indexOf(Math.max(...values))
        document.write(`Найбільший прибуток компанії був у  ${years[index]} році`)
    } else {
        document.write('Компанія не мала прибутків')
    }
</script>

</html>